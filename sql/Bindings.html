<!doctype HTML>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="codemirror.js"></script>
<script src="runmode.js"></script>
<script src="pyret.js"></script>
<script src="hilite.js"></script>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>2.1.5&nbsp;Bindings</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="pyret.css" title="default"/><link rel="stylesheet" type="text/css" href="styles.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Pyret</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Language_Concepts.html" class="tocviewselflink" data-pltdoc="x">Language Concepts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Builtins_and_Libraries.html" class="tocviewlink" data-pltdoc="x">Builtins and Libraries</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Internals.html" class="tocviewlink" data-pltdoc="x">Internals</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="Language_Concepts.html" class="tocviewlink" data-pltdoc="x">Language Concepts</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="s_forms.html" class="tocviewselflink" data-pltdoc="x">Language Constructs</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="testing.html" class="tocviewlink" data-pltdoc="x">Testing</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="equality.html" class="tocviewlink" data-pltdoc="x">equality</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="brands.html" class="tocviewlink" data-pltdoc="x">Brands</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="type-check.html" class="tocviewlink" data-pltdoc="x">Type Checking</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9660;</a></td><td>2.1&nbsp;</td><td><a href="s_forms.html" class="tocviewlink" data-pltdoc="x">Language Constructs</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1.1&nbsp;</td><td><a href="s_literals.html" class="tocviewlink" data-pltdoc="x">Primitives and Literals</a></td></tr><tr><td align="right">2.1.2&nbsp;</td><td><a href="s_program.html" class="tocviewlink" data-pltdoc="x">Programs</a></td></tr><tr><td align="right">2.1.3&nbsp;</td><td><a href="Import_Statements.html" class="tocviewlink" data-pltdoc="x">Import Statements</a></td></tr><tr><td align="right">2.1.4&nbsp;</td><td><a href="Provide_Statements.html" class="tocviewlink" data-pltdoc="x">Provide Statements</a></td></tr><tr><td align="right">2.1.5&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Bindings</a></td></tr><tr><td align="right">2.1.6&nbsp;</td><td><a href="Blocks.html" class="tocviewlink" data-pltdoc="x">Blocks</a></td></tr><tr><td align="right">2.1.7&nbsp;</td><td><a href="Declarations.html" class="tocviewlink" data-pltdoc="x">Declarations</a></td></tr><tr><td align="right">2.1.8&nbsp;</td><td><a href="Statements.html" class="tocviewlink" data-pltdoc="x">Statements</a></td></tr><tr><td align="right">2.1.9&nbsp;</td><td><a href="Expressions.html" class="tocviewlink" data-pltdoc="x">Expressions</a></td></tr><tr><td align="right">2.1.10&nbsp;</td><td><a href="s_annotations.html" class="tocviewlink" data-pltdoc="x">Annotations</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_3&quot;);">&#9658;</a></td><td>2.1.5&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Bindings</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_3"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1.5.1&nbsp;</td><td><a href="#%28part._.Name_bindings%29" class="tocviewlink" data-pltdoc="x">Name bindings</a></td></tr><tr><td align="right">2.1.5.2&nbsp;</td><td><a href="#%28part._.Annotated_bindings%29" class="tocviewlink" data-pltdoc="x">Annotated bindings</a></td></tr><tr><td align="right">2.1.5.3&nbsp;</td><td><a href="#%28part._.Shadowing%29" class="tocviewlink" data-pltdoc="x">Shadowing</a></td></tr><tr><td align="right">2.1.5.4&nbsp;</td><td><a href="#%28part._.Tuple_bindings%29" class="tocviewlink" data-pltdoc="x">Tuple bindings</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1.5.1<tt>&nbsp;</tt></span><a href="#%28part._.Name_bindings%29" class="tocsubseclink" data-pltdoc="x">Name bindings</a></td></tr><tr><td><span class="tocsublinknumber">2.1.5.2<tt>&nbsp;</tt></span><a href="#%28part._.Annotated_bindings%29" class="tocsubseclink" data-pltdoc="x">Annotated bindings</a></td></tr><tr><td><span class="tocsublinknumber">2.1.5.3<tt>&nbsp;</tt></span><a href="#%28part._.Shadowing%29" class="tocsubseclink" data-pltdoc="x">Shadowing</a></td></tr><tr><td><span class="tocsublinknumber">2.1.5.4<tt>&nbsp;</tt></span><a href="#%28part._.Tuple_bindings%29" class="tocsubseclink" data-pltdoc="x">Tuple bindings</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Provide_Statements.html" title="backward to &quot;2.1.4 Provide Statements&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="s_forms.html" title="up to &quot;2.1 Language Constructs&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Blocks.html" title="forward to &quot;2.1.6 Blocks&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h5>2.1.5<tt>&nbsp;</tt><a name="(part._.Bindings)"></a>Bindings</h5><p>Many syntactic forms in Pyret need to designate names for values.  These are
uniformly represented as <a href="#%28elem._%28bnf-prod._%28.Pyret._binding%29%29%29" data-pltdoc="x">&#8249;binding&#8250;</a>s:</p><blockquote class="SCodeFlow" style="white-space: pre;"><p><a name="(elem._(bnf-prod._(.Pyret._binding)))"></a>&#8249;binding&#8250;<span class="bnf-meta">:</span> <a href="#%28elem._%28bnf-prod._%28.Pyret._name-binding%29%29%29" data-pltdoc="x">&#8249;name-binding&#8250;</a><span class="bnf-meta"> | </span><a href="#%28elem._%28bnf-prod._%28.Pyret._tuple-binding%29%29%29" data-pltdoc="x">&#8249;tuple-binding&#8250;</a>
<a name="(elem._(bnf-prod._(.Pyret._name-binding)))"></a>&#8249;name-binding&#8250;<span class="bnf-meta">:</span> <span class="bnf-meta">[</span><span class="bnf-lit">shadow</span><span class="bnf-meta">]</span> <span class="bnf-lit bnf-unknown">NAME</span> <span class="bnf-meta">[</span><span class="bnf-lit">::</span> <a href="s_annotations.html#%28elem._%28bnf-prod._%28.Pyret._ann%29%29%29" data-pltdoc="x">&#8249;ann&#8250;</a><span class="bnf-meta">]</span>
<a name="(elem._(bnf-prod._(.Pyret._tuple-binding)))"></a>&#8249;tuple-binding&#8250;<span class="bnf-meta">:</span> <span class="bnf-lit">{</span> <span class="bnf-meta">(</span><a href="#%28elem._%28bnf-prod._%28.Pyret._binding%29%29%29" data-pltdoc="x">&#8249;binding&#8250;</a> <span class="bnf-lit">;</span><span class="bnf-meta">)</span><span class="bnf-meta">*</span> <a href="#%28elem._%28bnf-prod._%28.Pyret._binding%29%29%29" data-pltdoc="x">&#8249;binding&#8250;</a> <span class="bnf-meta">[</span><span class="bnf-lit">;</span><span class="bnf-meta">]</span> <span class="bnf-lit">}</span> <span class="bnf-meta">[</span><span class="bnf-lit">as</span> <a href="#%28elem._%28bnf-prod._%28.Pyret._name-binding%29%29%29" data-pltdoc="x">&#8249;name-binding&#8250;</a><span class="bnf-meta">]</span></p></blockquote><h5>2.1.5.1<tt>&nbsp;</tt><a name="(part._.Name_bindings)"></a>Name bindings</h5><p><div class="SIntrapara">The simplest form of binding is a <a href="#%28elem._%28bnf-prod._%28.Pyret._name-binding%29%29%29" data-pltdoc="x">&#8249;name-binding&#8250;</a>.  This form
simply associates a name with a given value:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight good-ex"><p>PI = ~3.141592
five = num-sqrt((3 * 3) + (4 * 4))
hw = string-append("Hello", " world")</p></pre></pre></div></p><h5>2.1.5.2<tt>&nbsp;</tt><a name="(part._.Annotated_bindings)"></a>Annotated bindings</h5><p><div class="SIntrapara">Slightly more complicated, a name binding may also specify an
<a href="s_annotations.html" data-pltdoc="x">annotation</a>, that will ensure that the
value being bound has the correct type:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight good-ex"><p>PI :: Number = ~3.141592
hw :: String = string-append("Hello", "world")

this-will-fail :: Boolean = 5</p></pre></pre></div><div class="SIntrapara">That last line will fail at runtime with an annotation error.</div></p><h5>2.1.5.3<tt>&nbsp;</tt><a name="(part._.Shadowing)"></a>Shadowing</h5><p>Pyret does not permit a program to implicitly bind the same name
multiple times in the same scope, as this can be confusing or
ambiguous: which name was meant?</p><pre class="pyret-block"><pre class="pyret-highlight bad-ex"><p>ans = 3 + 4
ans = true # did you mean to use a different name here?

ans # which one was meant?</p></pre></pre><p>Pyret will signal an error on the second binding of <span class="pyret-highlight"><span class="stt">ans</span></span> above,
saying that it <span style="font-style: italic">shadows</span> the earlier definition.  Shadowing can
occur within functions, too:</p><pre class="pyret-block"><pre class="pyret-highlight bad-ex"><p>ans = 3 + 4

fun oops(x):
  ans = x * 2  # Shadows the outer ans
  ans
end

fun another-oops(ans): # also shadows the outer ans
  if ans: 3 else: 4 end
end</p></pre></pre><p>The general rule for shadowing is to look "upward and leftward",
i.e. looking outward from the current scope to any enclosing scopes,
to see if there are any existing bindings of the same name.  The inner
definitions <span style="font-style: italic">shadow</span> the outer ones: because they are "hiding in
its shadow", the outer definitions are not visible in the inner scope.</p><p><div class="SIntrapara">But sometimes, redefining the same name makes the most sense.  In this
case, a program can explicitly specify that it means to hide the outer
definition, using the <span class="pyret-highlight"><span class="stt">shadow</span></span> keyword:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight good-ex"><p>ans = 3 + 4
fun oops(x):
  shadow ans = x * 2 # &lt;-------------------------+
  ans    # uses the ans defined the line above --+
end
fun another-oops(shadow ans):
  if ans: 3 else: 3 end # uses the function's parameter
end</p></pre></pre></div></p><h5>2.1.5.4<tt>&nbsp;</tt><a name="(part._.Tuple_bindings)"></a>Tuple bindings</h5><p>Tuples are useful to package up several Pyret values into a single
value, which can then be passed around and manipulated as a single
entity.  But often, the most useful manipulation is to break the tuple
apart into its components.  While there are <a href="Expressions.html#%28elem._%28bnf-prod._%28.Pyret._tuple-get%29%29%29" data-pltdoc="x">&#8249;tuple-get&#8250;</a>
expressions to access individual components, it&rsquo;s often easiest to
give all the components names.  We do this with a
<a href="#%28elem._%28bnf-prod._%28.Pyret._tuple-binding%29%29%29" data-pltdoc="x">&#8249;tuple-binding&#8250;</a>, which binds each component of a tuple to its
own name. The number of bindings must match the length of the given tuple:</p><div class="examples"><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span></div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>check:
  {x; y} = {1; 2}
  x is 1
  y is 2

  fun sum-two({k; v}, {a; b; c}):
    k + v + a + b + c
  end

  sum-two({10; 12}, {1; 4; 5}) is 32

  fun sum-vals(elts) block:
    var sum = 0
    for each({k; v} from elts):
      sum := sum + v
    end
    sum
  end

  elts = [list: {"a"; 5}, {"b"; 6}, {"c"; 7}]
  sum-vals(elts) is 18
end</p></pre></pre></div></p></div><p>It is also possible to <span style="font-style: italic">nest</span> tuple bindings, if the tuple being
bound has tuples nested inside it:</p><div class="examples"><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span></div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>check:
  {{w; x}; {y; z}} = {{empty; true}; {"hello"; 4}}
  w is [list: ]
  x is true
  y is "hello"
  z is 4
end</p></pre></pre></div></p></div><p>Nested bindings likewise must match the number of components in the
tuple being bound, and follow the same rules of shadowing as normal
name bindings.</p><p>With nested tuples, it is sometimes also useful to not only decompose
the nested tuples into their components, but to give a name to the
nested tuple itself:</p><div class="examples"><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span></div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>check:
  {{w; x} as wx; {y; z} as yz} as wxyz = {{empty; true}; {"hello"; 4}}
  w is [list: ]
  x is true
  y is "hello"
  z is 4
  wx is {empty; true}
  yz is {"hello", 4}
  wxyz is {wx; yz}
end</p></pre></pre></div></p></div><p>As with any other name bindings, you can provide annotations on any of
these components.  Tuple annotations should only go on the tuples
themselves or on their components; annotating the <span class="pyret-highlight"><span class="stt">as NAME</span></span>
binding is not allowed.  We demonstrate both permitted styles of
annotation below</p><div class="examples"><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span></div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>check:
  {{w :: List; x :: Boolean} as wx; {y; z} as yz :: {String, Number}} as wxyz = {{empty; true}; {"hello"; 4}}
  w is [list: ]
  x is true
  y is "hello"
  z is 4
  wx is {empty; true}
  yz is {"hello", 4}
  wxyz is {wx; yz}
end</p></pre></pre></div></p></div><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Provide_Statements.html" title="backward to &quot;2.1.4 Provide Statements&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="s_forms.html" title="up to &quot;2.1 Language Constructs&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Blocks.html" title="forward to &quot;2.1.6 Blocks&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>